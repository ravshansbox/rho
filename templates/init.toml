# Rho Configuration
# Edit this file, then run `rho sync` to apply changes.
# Docs: https://github.com/mikeyobrien/rho

# ── Project Discovery ───────────────────────────────────

projects_dir = "~/.rho/projects"      # Root directory used for local project/repo discovery
# projects_dir = "~/projects"         # Example override (recommended if your repos live here)

# ── Agent Identity ──────────────────────────────────────

[agent]
name = "rho"                          # Your agent's name

# ── Modules ─────────────────────────────────────────────
# Enable (true) or comment out / set false to disable.
# Core modules are always on and cannot be disabled.

[modules.core]
heartbeat = true                      # Heartbeat daemon, check-ins, and memory consolidation
memory = true                         # Memory browser and viewer

[modules.knowledge]
vault = true                          # Knowledge vault with full-text search and orphan cleanup

[modules.tools]
brave-search = true                   # Web search via Brave Search API
x-search = true                       # X/Twitter search via xAI Grok
telegram = true                       # Telegram channel adapter for chatting with your agent
email = false                         # Agent email via Rho Cloud (rhobot.dev)
subagents = true                      # Subagent delegation with chains, parallel execution, and async support
messenger = true                      # Multi-agent communication extension for pi coding agent
interactive-shell = true              # Observable PTY shell control for interactive CLI workflows
web-access = true                     # Web search and content extraction extension for pi
mcp-adapter = true                    # Token-efficient adapter for MCP server integration
interview-tool = true                 # Structured interview assistant for discovery workflows

# Skills-only modules (no local extensions, mostly external SKILL packages)
[modules.skills]
workflows = true                      # SOP-style workflow skills executed via /skill run
session-search = true                 # Search across pi session logs
update-pi = true                      # Update pi coding agent to latest version
visual-explainer = true               # Generate polished HTML diagrams, reviews, and comparison tables

[modules.ui]
usage-bars = true                     # Token usage display bars

# ── Module Settings ─────────────────────────────────────
# Configure individual modules below.
# Settings only apply when the corresponding module is enabled.

[settings.heartbeat]
interval = "30m"                      # Check-in interval (e.g., "15m", "1h", "2h")
# prompt = "~/.rho/heartbeat-prompt.txt"  # Custom heartbeat prompt

# Tmux integration (used by `rho start/stop/status/trigger`)
# tmux_socket = "rho"                 # Name of the dedicated tmux socket (passed as: tmux -L <socket>)
# tmux_config = "builtin"             # "builtin" = use the tmux config shipped with your installed rho version
# tmux_config = "~/.rho/tmux.conf"    # Or set an explicit path to your own tmux config

[settings.telegram]
enabled = false                       # Enable Telegram channel adapter
mode = "polling"                     # polling (MVP) | webhook (future)
bot_token_env = "TELEGRAM_BOT_TOKEN" # Env var containing bot token
poll_timeout_seconds = 30             # Long-poll timeout for getUpdates
allowed_chat_ids = []                 # Optional allowlist of chat IDs
allowed_user_ids = []                 # Optional allowlist of Telegram user IDs
require_mention_in_groups = true      # Ignore group chatter unless activated
# Speech-to-text provider for voice message transcription
# stt_provider = "elevenlabs"           # "elevenlabs" | "openai"
# stt_api_key_env = "ELEVENLABS_API_KEY" # Env var holding API key
# stt_endpoint = ""                      # Custom endpoint (e.g., "http://localhost:8787" for local Whisper)
# stt_model = ""                         # Model override (default: provider-specific)

[settings.email]
# handle = ""                         # Your rhobot.dev email handle

# [settings.brave-search]
# api_key_env = "BRAVE_API_KEY"       # Environment variable for API key

# ── Web UI ─────────────────────────────────────────────
# Browser-based chat interface and state file editor.
# Launch with: rho web

[settings.web]
enabled = false                       # Auto-start with `rho start`
port = 3141                           # Server port (localhost only)

# ── RPC Orphan Policy ────────────────────────────────────
# Controls how long rho-web keeps an active session alive after all
# WebSocket clients disconnect (e.g., phone lock or app backgrounded).
#
# Precedence: env var > this config > built-in default
#   RHO_RPC_ORPHAN_GRACE_MS       overrides rpc_orphan_grace_ms
#   RHO_RPC_ORPHAN_ABORT_DELAY_MS overrides rpc_orphan_abort_delay_ms
#
# Built-in defaults (desktop / fast reconnect):
#   rpc_orphan_grace_ms       = 60000   # 1 minute
#   rpc_orphan_abort_delay_ms = 5000    # 5 seconds after abort signal
#
# Mobile lock-tolerant example (sustains streams through ~5 min lock):
#   rpc_orphan_grace_ms       = 300000  # 5 minutes
#   rpc_orphan_abort_delay_ms = 30000   # 30 seconds soft-stop window
#
# Tradeoff: longer grace means orphaned sessions (e.g., browser closed
# without reconnecting) consume server resources until the timer fires.
# Tune based on your typical reconnect latency and server capacity.
#
# rpc_orphan_grace_ms = 60000
# rpc_orphan_abort_delay_ms = 5000
